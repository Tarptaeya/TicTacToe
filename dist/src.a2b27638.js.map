{"version":3,"sources":["src/index.js"],"names":["board","playerMove","playerFirst","playerChar","aiChar","MAX_DEPTH","$","document","querySelector","bind","$$","querySelectorAll","createBoard","boardContainer","innerHTML","i","row","j","push","forEach","cell","addEventListener","x","parseInt","getAttribute","y","won","alert","playBestMove","move","bestMove","console","log","initGame","p","r","hasNextMove","d","results","minArray","maxArray","arr","length","window","onload","onsubmit","e","preventDefault","mode","value","first"],"mappings":"AAAA,IAAIA,KAAJ;AACA,IAAIC,UAAJ;AAEA,IAAIC,WAAJ;AACA,IAAIC,UAAJ;AACA,IAAIC,MAAJ;AAEA,IAAIC,SAAS,GAAG,GAAhB;AAEA,IAAIC,CAAC,GAAGC,QAAQ,CAACC,aAAT,CAAuBC,IAAvB,CAA4BF,QAA5B,CAAR;AACA,IAAIG,EAAE,GAAGH,QAAQ,CAACI,gBAAT,CAA0BF,IAA1B,CAA+BF,QAA/B,CAAT;;AAEA,SAASK,WAAT,GAAuB;AACrBZ,EAAAA,KAAK,GAAG,EAAR;AACA,MAAIa,cAAc,GAAGP,CAAC,CAAC,kBAAD,CAAtB;AACAO,EAAAA,cAAc,CAACC,SAAf,GAA2B,EAA3B;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,QAAIC,GAAG,GAAG,EAAV;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1BD,MAAAA,GAAG,CAACE,IAAJ,CAAS,EAAT;AACAL,MAAAA,cAAc,CAACC,SAAf,yCAA0DC,CAA1D,SAA8DE,CAA9D,uBAA4EF,CAA5E,uBAA0FE,CAA1F;AACD;;AACDjB,IAAAA,KAAK,CAACkB,IAAN,CAAWF,GAAX;AACD;;AAEDN,EAAAA,EAAE,CAAC,OAAD,CAAF,CAAYS,OAAZ,CAAoB,UAASC,IAAT,EAAe;AACjCA,IAAAA,IAAI,CAACC,gBAAL,CAAsB,OAAtB,EAA+B,YAAW;AACxC,UAAIpB,UAAU,IAAImB,IAAI,CAACN,SAAL,IAAkB,EAApC,EAAwC;AACtCM,QAAAA,IAAI,CAACN,SAAL,GAAiBX,UAAjB;AACA,YAAImB,CAAC,GAAGC,QAAQ,CAACH,IAAI,CAACI,YAAL,CAAkB,QAAlB,CAAD,CAAhB;AACA,YAAIC,CAAC,GAAGF,QAAQ,CAACH,IAAI,CAACI,YAAL,CAAkB,QAAlB,CAAD,CAAhB;AACAxB,QAAAA,KAAK,CAACsB,CAAD,CAAL,CAASG,CAAT,IAActB,UAAd;AACAF,QAAAA,UAAU,GAAG,KAAb;;AACA,YAAIyB,GAAG,CAACvB,UAAD,CAAP,EAAqB;AACnBwB,UAAAA,KAAK,CAAC,UAAD,CAAL;AACA;AACD;;AACDC,QAAAA,YAAY;AACb;AACF,KAbD;AAcD,GAfD;AAgBD;;AAGD,SAASA,YAAT,GAAwB;AACtB,MAAIC,IAAI,GAAGC,QAAQ,CAAC1B,MAAD,CAAnB;AACA,MAAIkB,CAAC,GAAGO,IAAI,CAAC,CAAD,CAAZ;AACA,MAAIJ,CAAC,GAAGI,IAAI,CAAC,CAAD,CAAZ;AACA7B,EAAAA,KAAK,CAACsB,CAAD,CAAL,CAASG,CAAT,IAAcrB,MAAd;AACA2B,EAAAA,OAAO,CAACC,GAAR,CAAYV,CAAC,GAAG,GAAJ,GAAUG,CAAtB;AACAnB,EAAAA,CAAC,iBAAUgB,CAAV,SAAcG,CAAd,EAAD,CAAoBX,SAApB,GAAgCV,MAAhC;;AACA,MAAIsB,GAAG,CAACtB,MAAD,CAAP,EAAiB;AACfuB,IAAAA,KAAK,CAAC,aAAD,CAAL;AACA;AACD;;AACD1B,EAAAA,UAAU,GAAG,IAAb;AACD;;AAGD,SAASgC,QAAT,GAAoB;AAClBrB,EAAAA,WAAW;AACXR,EAAAA,MAAM,GAAG,IAAT;AACAD,EAAAA,UAAU,GAAG,IAAb;AACA,MAAID,WAAJ,EAAiBD,UAAU,GAAG,IAAb,CAAjB,KACK2B,YAAY;AAClB;;AAGD,SAASF,GAAT,CAAaQ,CAAb,EAAgB;AACd,OAAK,IAAInB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,QAAIoB,CAAC,GAAG,IAAR;;AACA,SAAK,IAAIlB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,UAAIjB,KAAK,CAACe,CAAD,CAAL,CAASE,CAAT,KAAeiB,CAAnB,EAAsBC,CAAC,GAAG,KAAJ;AACvB;;AACD,QAAIA,CAAJ,EAAO,OAAO,IAAP;AACR;;AAED,OAAK,IAAIpB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,QAAIoB,CAAC,GAAG,IAAR;;AACA,SAAK,IAAIlB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,UAAIjB,KAAK,CAACiB,CAAD,CAAL,CAASF,CAAT,KAAemB,CAAnB,EAAsBC,CAAC,GAAG,KAAJ;AACvB;;AACD,QAAIA,CAAJ,EAAO,OAAO,IAAP;AACR;;AAED,MAAIA,CAAC,GAAG,IAAR;;AACA,OAAK,IAAIpB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,QAAIf,KAAK,CAACe,CAAD,CAAL,CAASA,CAAT,KAAemB,CAAnB,EAAsBC,CAAC,GAAG,KAAJ;AACvB;;AACD,MAAIA,CAAJ,EAAO,OAAO,IAAP;AAEPA,EAAAA,CAAC,GAAG,IAAJ;;AACA,OAAK,IAAIpB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,QAAIf,KAAK,CAAC,IAAIe,CAAL,CAAL,CAAaA,CAAb,KAAmBmB,CAAvB,EAA0BC,CAAC,GAAG,KAAJ;AAC3B;;AAED,SAAOA,CAAP;AACD;;AAGD,SAASC,WAAT,GAAuB;AACrB,MAAIV,GAAG,CAACvB,UAAD,CAAP,EAAqB,OAAO,KAAP;AACrB,MAAIuB,GAAG,CAACtB,MAAD,CAAP,EAAiB,OAAO,KAAP;;AACjB,OAAK,IAAIW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,SAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,UAAIjB,KAAK,CAACe,CAAD,CAAL,CAASE,CAAT,KAAe,EAAnB,EAAuB,OAAO,IAAP;AACxB;AACF;;AACD,SAAO,KAAP;AACD;;AAGD,SAASa,QAAT,CAAkBI,CAAlB,EAA0B;AAAA,MAALG,CAAK,uEAAH,CAAG;AACxB,MAAIX,GAAG,CAACvB,UAAD,CAAP,EAAqB,OAAO,CAAC,CAAC,CAAF,EAAK,CAAC,CAAN,EAAS,CAAC,CAAV,CAAP;AACrB,MAAIuB,GAAG,CAACtB,MAAD,CAAP,EAAiB,OAAO,CAAC,CAAD,EAAI,CAAC,CAAL,EAAQ,CAAC,CAAT,CAAP;AACjB,MAAI,CAACgC,WAAW,EAAhB,EAAoB,OAAO,CAAC,CAAD,EAAI,CAAC,CAAL,EAAQ,CAAC,CAAT,CAAP;AAEpB,MAAIC,CAAC,GAAGhC,SAAR,EAAmB,OAAO,CAAC,CAAD,EAAI,CAAC,CAAL,EAAQ,CAAC,CAAT,CAAP;AAEnB,MAAIiC,OAAO,GAAG,EAAd;;AAEA,OAAK,IAAIvB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,SAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,UAAIjB,KAAK,CAACe,CAAD,CAAL,CAASE,CAAT,KAAe,EAAnB,EAAuB;AACvBjB,MAAAA,KAAK,CAACe,CAAD,CAAL,CAASE,CAAT,IAAciB,CAAd;AACA,UAAIC,CAAJ;;AACA,UAAID,CAAC,IAAI/B,UAAT,EAAqB;AACnBgC,QAAAA,CAAC,GAAGL,QAAQ,CAAC1B,MAAD,EAASiC,CAAC,GAACA,CAAC,GAAC,CAAb,CAAZ;AACD,OAFD,MAEO;AACLF,QAAAA,CAAC,GAAGL,QAAQ,CAAC3B,UAAD,EAAakC,CAAC,GAACA,CAAC,GAAC,CAAjB,CAAZ;AACD;;AACDC,MAAAA,OAAO,CAACpB,IAAR,CAAa,CAACiB,CAAC,CAAC,CAAD,CAAF,EAAOpB,CAAP,EAAUE,CAAV,CAAb;AACAjB,MAAAA,KAAK,CAACe,CAAD,CAAL,CAASE,CAAT,IAAc,EAAd;AACD;AACF;;AAED,MAAIiB,CAAC,IAAI/B,UAAT,EAAqB;AACnB,WAAOoC,QAAQ,CAACD,OAAD,CAAf;AACD;;AAED,SAAOE,QAAQ,CAACF,OAAD,CAAf;AACD;;AAGD,SAASC,QAAT,CAAkBE,GAAlB,EAAuB;AACrB,MAAIN,CAAC,GAAGM,GAAG,CAAC,CAAD,CAAX;;AACA,OAAK,IAAI1B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0B,GAAG,CAACC,MAAxB,EAAgC3B,CAAC,EAAjC,EAAqC;AACnC,QAAIoB,CAAC,CAAC,CAAD,CAAD,GAAOM,GAAG,CAAC1B,CAAD,CAAH,CAAO,CAAP,CAAX,EAAsBoB,CAAC,GAAGM,GAAG,CAAC1B,CAAD,CAAP;AACvB;;AACD,SAAOoB,CAAP;AACD;;AAGD,SAASK,QAAT,CAAkBC,GAAlB,EAAuB;AACrB,MAAIN,CAAC,GAAGM,GAAG,CAAC,CAAD,CAAX;;AACA,OAAK,IAAI1B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0B,GAAG,CAACC,MAAxB,EAAgC3B,CAAC,EAAjC,EAAqC;AACnC,QAAIoB,CAAC,CAAC,CAAD,CAAD,GAAOM,GAAG,CAAC1B,CAAD,CAAH,CAAO,CAAP,CAAX,EAAsBoB,CAAC,GAAGM,GAAG,CAAC1B,CAAD,CAAP;AACvB;;AACD,SAAOoB,CAAP;AACD;;AAGDQ,MAAM,CAACC,MAAP,GAAgB,YAAW;AACzBtC,EAAAA,CAAC,CAAC,OAAD,CAAD,CAAWuC,QAAX,GAAsB,UAASC,CAAT,EAAY;AAChCA,IAAAA,CAAC,CAACC,cAAF;AACA,QAAIC,IAAI,GAAG1C,CAAC,CAAC,OAAD,CAAD,CAAW2C,KAAtB;AACA,QAAIC,KAAK,GAAG5C,CAAC,CAAC,QAAD,CAAD,CAAY2C,KAAxB;AACA5C,IAAAA,SAAS,GAAGkB,QAAQ,CAACyB,IAAD,CAApB;AACA9C,IAAAA,WAAW,GAAGgD,KAAK,KAAK,QAAxB;AACAjB,IAAAA,QAAQ;AACT,GAPD;AAQD,CATD","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["var board;\nvar playerMove;\n\nvar playerFirst;\nvar playerChar;\nvar aiChar;\n\nvar MAX_DEPTH = 100;\n\nvar $ = document.querySelector.bind(document);\nvar $$ = document.querySelectorAll.bind(document);\n\nfunction createBoard() {\n  board = [];\n  var boardContainer = $('#board-container');\n  boardContainer.innerHTML = '';\n  for (var i = 0; i < 3; i++) {\n    var row = [];\n    for (var j = 0; j < 3; j++) {\n      row.push('');\n      boardContainer.innerHTML += `<div class='cell' id='cell-${i}${j}' data-x='${i}' data-y='${j}'></div>`;\n    }\n    board.push(row);\n  }\n\n  $$('.cell').forEach(function(cell) {\n    cell.addEventListener('click', function() {\n      if (playerMove && cell.innerHTML == '') {\n        cell.innerHTML = playerChar;\n        var x = parseInt(cell.getAttribute('data-x'));\n        var y = parseInt(cell.getAttribute('data-y'));\n        board[x][y] = playerChar;\n        playerMove = false;\n        if (won(playerChar)) {\n          alert('You won!');\n          return;\n        }\n        playBestMove();\n      }\n    });\n  });\n}\n\n\nfunction playBestMove() {\n  var move = bestMove(aiChar);\n  var x = move[1];\n  var y = move[2];\n  board[x][y] = aiChar;\n  console.log(x + \" \" + y);\n  $(`#cell-${x}${y}`).innerHTML = aiChar;\n  if (won(aiChar)) {\n    alert('You lost :(');\n    return;\n  }\n  playerMove = true;\n}\n\n\nfunction initGame() {\n  createBoard();\n  aiChar = 'üçå';\n  playerChar = 'üêç';\n  if (playerFirst) playerMove = true;\n  else playBestMove();\n}\n\n\nfunction won(p) {\n  for (var i = 0; i < 3; i++) {\n    var r = true;\n    for (var j = 0; j < 3; j++) {\n      if (board[i][j] != p) r = false;\n    }\n    if (r) return true;\n  }\n\n  for (var i = 0; i < 3; i++) {\n    var r = true;\n    for (var j = 0; j < 3; j++) {\n      if (board[j][i] != p) r = false;\n    }\n    if (r) return true;\n  }\n\n  var r = true;\n  for (var i = 0; i < 3; i++) {\n    if (board[i][i] != p) r = false;\n  }\n  if (r) return true;\n\n  r = true;\n  for (var i = 0; i < 3; i++) {\n    if (board[2 - i][i] != p) r = false;\n  }\n\n  return r;\n}\n\n\nfunction hasNextMove() {\n  if (won(playerChar)) return false;\n  if (won(aiChar)) return false;\n  for (var i = 0; i < 3; i++) {\n    for (var j = 0; j < 3; j++) {\n      if (board[i][j] == '') return true;\n    }\n  }\n  return false;\n}\n\n\nfunction bestMove(p, d=0) {\n  if (won(playerChar)) return [-1, -1, -1];\n  if (won(aiChar)) return [1, -1, -1];\n  if (!hasNextMove()) return [0, -1, -1];\n\n  if (d > MAX_DEPTH) return [0, -1, -1];\n\n  var results = [];\n\n  for (var i = 0; i < 3; i++) {\n    for (var j = 0; j < 3; j++) {\n      if (board[i][j] != '') continue;\n      board[i][j] = p;\n      var r;\n      if (p == playerChar) {\n        r = bestMove(aiChar, d=d+1);\n      } else {\n        r = bestMove(playerChar, d=d+1);\n      }\n      results.push([r[0], i, j]);\n      board[i][j] = '';\n    }\n  }\n\n  if (p == playerChar) {\n    return minArray(results);\n  }\n\n  return maxArray(results);\n}\n\n\nfunction minArray(arr) {\n  var r = arr[0];\n  for (var i = 0; i < arr.length; i++) {\n    if (r[0] > arr[i][0]) r = arr[i];\n  }\n  return r;\n}\n\n\nfunction maxArray(arr) {\n  var r = arr[0];\n  for (var i = 0; i < arr.length; i++) {\n    if (r[0] < arr[i][0]) r = arr[i];\n  }\n  return r;\n}\n\n\nwindow.onload = function() {\n  $('#form').onsubmit = function(e) {\n    e.preventDefault();\n    var mode = $('#mode').value;\n    var first = $('#first').value;\n    MAX_DEPTH = parseInt(mode);\n    playerFirst = first === 'player';\n    initGame();\n  }\n}\n"]}